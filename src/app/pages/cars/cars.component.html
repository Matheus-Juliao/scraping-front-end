<app-loading *ngIf="showLoanding" ></app-loading>
<form class="card" #form="ngForm" (ngSubmit)="onSubmit(form)">
    <div class="text-center m-2">
        <select name="brand" class="form-control-sm text-center" (change)="brandCar(form)" aria-label="Digite ou selecione a marca do veiculo" ngModel>
            <option value="" disabled selected>Digite ou selecione a marca do veiculo</option>
            <option *ngFor="let item of brands" [value]="item.Value">{{ item.Label }}</option>
        </select>
    </div>

    <div class="text-center m-2">
        <select name="model" class="form-control-sm text-center" (change)="modelYearCar(form)" aria-label="Digite ou selecione o modelo do veículo" ngModel [disabled]="hideModels">
            <option value="" disabled selected>Digite ou selecione o modelo do veículo</option>
            <option *ngFor="let item of models" [value]="item.Value">{{ item.Label }}</option>
        </select>
    </div>

    <div class="text-center m-2">
        <select name="year" class="form-control-sm text-center" (change)="modelYearCar(form)" aria-label="Digite ou selecione o ano modelo do veículo" ngModel [disabled]="hideYears">
            <option value="" disabled selected>Digite ou selecione o ano modelo do veículo</option>
            <option *ngFor="let item of years" [value]="item.Value">{{ item.Label }}</option>
        </select>
    </div>

    <div class="text-center m-2">
        <select name="initialReference" class="form-control-sm text-center" (change)="modelYearCar(form)" aria-label="Mês e ano de referência inicial" ngModel [disabled]="hideYears">
            <option value="" disabled selected>Mês e ano de referência inicial</option>
            <option *ngFor="let item of reference" [value]="item.Codigo">{{ item.Mes }}</option>
        </select>

        <select name="finalReference" class="form-control-sm text-center" (change)="modelYearCar(form)" aria-label="Mês e ano de referência final" ngModel [disabled]="hideYears">
            <option value="" disabled selected>Mês e ano de referência final</option>
            <option *ngFor="let item of reference" [value]="item.Codigo">{{ item.Mes }}</option>
        </select>
    </div>

    <div class="d-grid gap-2 col-2 mx-auto" >
        <button class="btn btn-primary m-2" type="submit" [disabled]="showButton(form)">Enviar</button>
    </div>

    <div class="card" *ngIf="showTable">
            <ul *ngFor="let item of response; let i = index">
                <li > Mês de referência: {{ response[i].mesdereferencia }}</li>
                <li>Código Fipe: {{ response[i].codigoFipe }} </li>
                <li>Marca: {{ response[i].marca }} </li>
                <li>Modelo: {{ response[i].modelo }} </li>
                <li>Ano modelo: {{ response[i].anoModelo }} </li>
                <li>Autenticação: {{ response[i].autenticacao }} </li>
                <li>Data da consulta: {{ response[i].dataDaConsulta }} </li>
                <li>Preço médio {{ response[i].precoMedio }} </li>
            </ul>
    </div>
</form>
